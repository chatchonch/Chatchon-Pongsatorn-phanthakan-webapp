<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="styles/list_name.css" />
    <script src="scripts/login.js"></script>
    <title>list</title>
  </head>
  <body>
    <div class="column_flex">
        <div class="row_flex">
      <div class="name_patient">รายชื่อผู้ป่วย</div> 
      <div class="find_ssn_box" ><form>
          
          <input type = "text" class="ssn_to_find" id="ssn_to_find" placeholder = "กรอกเลขบัตรประชาชน..." maxlength="13" pattern="[0-9].{13}"></form>
          <button type="button" class = "find_but" id="searchBtn">ค้นหา</button></div>
      
    </div>
    <table class="table">
        <tr class="table_patient">
          <th class="ssn_head_table">รหัสบัตรประชาชน</th>
          <th  class="fname_head_table">ชื่อ</th>
          <th  class="lname_head_table">นามสกุล</th>
          <th  class="phone_head_table">เบอร์โทรศัพท์</th>
          <th  class="date_head_table">วันที่นัด</th>
          <th  class="place_head_table">สถานบริการ</th>
        </tr>
        <tr>
          <td>1749800219961</td>
          <td>สมมน</td>
          <td>มนตรา</td>
          <td>0123456789</td>
          <td>10-10-2563</td>
          <td>สถานบริการที่ 1</td>
        </tr>
        <tr>
            <td>1749800219961</td>
            <td>สมพัน</td>
            <td>พันบาท</td>
            <td>0321654987</td>
            <td>10-10-2563</td>
            <td>สถานบริการที่ 1</td>
          </tr>
          <tr>
            <td>1749800219961</td>
            <td>สมพัน</td>
            <td>พันบาท</td>
            <td>0321654987</td>
            <td>10-10-2563</td>
            <td>สถานบริการที่ 1</td>
          </tr>
          <tr>
            <td>1749800219961</td>
            <td>สมพัน</td>
            <td>พันบาท</td>
            <td>0321654987</td>
            <td>10-10-2563</td>
            <td>สถานบริการที่ 1</td>
          </tr>
          <tr>
            <td>1749800219961</td>
            <td>สมพัน</td>
            <td>พันบาท</td>
            <td>0321654987</td>
            <td>10-10-2563</td>
            <td>สถานบริการที่ 1</td>
          </tr>
          <tr>
            <td>1749800219961</td>
            <td>สมพัน</td>
            <td>พันบาท</td>
            <td>0321654987</td>
            <td>10-10-2563</td>
            <td>สถานบริการที่ 1</td>
          </tr>
          <tr>
            <td>1749800219961</td>
            <td>สมพัน</td>
            <td>พันบาท</td>
            <td>0321654987</td>
            <td>10-10-2563</td>
            <td>สถานบริการที่ 1</td>
          </tr>
          <tr>
            <td>1749800219961</td>
            <td>สมพัน</td>
            <td>พันบาท</td>
            <td>0321654987</td>
            <td>10-10-2563</td>
            <td>สถานบริการที่ 1</td>
          </tr>
          <tr>
            <td>1749800219961</td>
            <td>สมพัน</td>
            <td>พันบาท</td>
            <td>0321654987</td>
            <td>10-10-2563</td>
            <td>สถานบริการที่ 1</td>
          </tr>
          <tr>
            <td>1749800219961</td>
            <td>สมพัน</td>
            <td>พันบาท</td>
            <td>0321654987</td>
            <td>10-10-2563</td>
            <td>สถานบริการที่ 1</td>
          </tr>
          <tr>
            <td>1749800219961</td>
            <td>สมพัน</td>
            <td>พันบาท</td>
            <td>0321654987</td>
            <td>10-10-2563</td>
            <td>สถานบริการที่ 1</td>
          </tr>
          <tr>
            <td>1749800219961</td>
            <td>สมพัน</td>
            <td>พันบาท</td>
            <td>0321654987</td>
            <td>10-10-2563</td>
            <td>สถานบริการที่ 1</td>
          </tr>
          
      </table>
  </body>
  <script src="https://www.gstatic.com/firebasejs/8.1.2/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.1.2/firebase-firestore.js"></script>
<script>
    let SSN = document.getElementById("ssn_to_find")
    let searchBtn = document.getElementById("searchBtn");

    var firebaseConfig = {
      apiKey: "AIzaSyBsm2OONg2-y0A53i0mhDrGaBv_EzNksRE",
      authDomain: "myprojectpcu.firebaseapp.com",
      projectId: "myprojectpcu",
      storageBucket: "myprojectpcu.appspot.com",
      messagingSenderId: "653860991694",
      appId: "1:653860991694:web:09b7de81d7b5f15d2b569f",
      measurementId: "G-CB5P88YJ8G"
    };

    firebase.initializeApp(firebaseConfig);
    
    var db = firebase.firestore();
    db.collection("สถานบริการที่ 1")
    .get()
    .then(function(querySnapshot) {
        querySnapshot.forEach(function(doc) {
            // doc.data() is never undefined for query doc snapshots
            console.log(doc.id, " => ", doc.data());
        });
    })
    .catch(function(error) {
        console.log("Error getting documents: ", error);
    });
    searchBtn.addEventListener('click', function() {
      SSN = SSN.value;
      db.collection("สถานบริการที่ 1").doc(SSN).get().then(function(doc) {
        if (doc.exists) {
          console.log("Document data:", doc.data());
        }
        else {
          // doc.data() will be undefined in this case
          console.log("No such document!");
        }
      }).catch(function(error) {
        console.log("Error getting document:", error);
});
    })
</script>
</html>